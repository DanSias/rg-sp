<!doctype html>
<meta charset="utf-8" />
<title>RocketGate Ã— Shoplazza Â· Dashboard</title>
<link rel="stylesheet" href="/dist/styles.css" />
<style>
  body { font-family: system-ui, sans-serif; margin: 2rem auto; max-width: 760px; line-height: 1.5; }
  .card { border:1px solid #e5e7eb; border-radius:12px; padding:1rem; margin:1rem 0; }
  label { display:block; margin:.5rem 0 .25rem; font-weight:600; }
  input, select { padding:.45rem .5rem; width: 100%; max-width: 420px; }
  button { padding:.5rem .9rem; cursor:pointer; }
  .row { display:flex; gap:1rem; flex-wrap:wrap; }
  .muted { color:#6b7280; font-size:.9rem; }
  code { background:#f3f4f6; padding:.12rem .32rem; border-radius:6px; }
</style>

<h1>ðŸš€ RocketGate Ã— Shoplazza</h1>
<p class="muted">Connected store: <strong id="shop">unknown</strong></p>

<section class="card">
  <h2>RocketGate Settings</h2>
  <!-- PRG fallback if JS is disabled; our server accepts urlencoded + JSON -->
  <form id="rgSettings" method="post" action="/app-api/rg-settings" novalidate>
    <label for="merchantId">Merchant ID</label>
    <input id="merchantId" name="merchantId" placeholder="e.g. 100000000123" />

    <label for="merchantKey">Merchant Password / Key</label>
    <!-- Do not prefill this for security; user can update to rotate -->
    <input id="merchantKey" name="merchantKey" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />

    <label for="mode">Mode</label>
    <select id="mode" name="mode">
      <option value="test">Test</option>
      <option value="live">Live</option>
    </select>

    <label for="returnUrl">Return URL</label>
    <input id="returnUrl" name="returnUrl" />

    <label for="cancelUrl">Cancel URL</label>
    <input id="cancelUrl" name="cancelUrl" />

    <div style="margin-top:1rem">
      <button type="submit">Save Settings</button>
    </div>
  </form>
  <div id="saveMsg" class="muted" style="margin-top:.5rem"></div>
</section>

<section class="card">
  <h2>Hosted Page â€” Test</h2>
  <form id="hpTest">
    <div class="row">
      <div>
        <label for="amount">Amount</label>
        <input id="amount" name="amount" value="19.99" />
      </div>
      <div>
        <label for="currency">Currency</label>
        <input id="currency" name="currency" value="USD" />
      </div>
      <div style="align-self:flex-end">
        <button type="submit">Generate Hosted Page Link</button>
      </div>
    </div>
  </form>
  <p class="muted" id="hpResult"></p>
</section>

<section class="card">
  <h2>Tools</h2>
  <div class="row">
    <a href="/health">Health</a>
    <a id="logsLink" href="/admin/logs">Logs</a>
    <a id="shopsLink" href="/admin/shops">Shops</a>
  </div>
</section>

<!-- Load the external browser-only script; cache-busted while developing -->
<script src="/app.js?v=dev2" defer></script>
<noscript><p class="muted">JavaScript is required to manage settings.</p></noscript>